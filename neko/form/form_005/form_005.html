<HTML>
<!--        form_05.htm        -->
<!--        2006/10/20       -->
<HEAD>
<LINK REL=STYLESHEET HREF="../neko.css" TYPE="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>第５章 </TITLE>
<base href='http://www.kumei.ne.jp/c_lang/form/'>
<meta http-equiv='Content-Type'content='text/htm; charset=UTF-8'>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<H1>
第５章 テキストを表示しよう
</H1>
</CENTER>
<HR>
<IMG SRC="../img/my10x.gif" ALIGN="left">
テキストを表示するには、GraphicsクラスのDrawStringメソッドを使います。
<P>
<BR CLEAR="left"><BR>
DrawStringメソッドは、次のように定義されています。
<PRE>
public void DrawString (
	string s,
	Font font,
	Brush brush,
	PointF point
)
</PRE>
sは表示するテキストです。<P>
指定のFontオブジェクト、Brushオブジェクトで描画されます。<P>
描画位置はPointFオブジェクトで指定します。<P>
他にもオーバーロードバージョンがいくつかあります。<P>
Fontを設定するには、Fontクラスを利用します。Fontクラスは、System.Drawing名前空間で定義されています。複数のオーバーロードコンストラクタが存在しますが、もっとも手頃なのが
<PRE>
public Font (
	string familyName,
	float emSize
)
</PRE>
でしょう。<P>
familyNameには、フォントファミリを指定します。<P>
emSizeには、サイズ(ポイント)を指定します。<P>
また、Formクラスには、Controlクラスから継承されてきたFontプロパティが存在しますので、これをDrawStringメソッドの引数に使うこともできます。<P>
Brushクラスのオブジェクトを指定するとき、Brushesクラスの静的プロパティがBrushクラスのオブジェクトを返すことを利用すると簡単です。このプロパティは、White, Blueなど色の名前がそのままプロパティになっています。<P>
PointF構造体は、浮動小数点座標(x,y)を表します。コンストラクタは
<PRE>
public PointF (
	float x,
	float y
)
</PRE>
となっています。<P>
では、最も簡単なテキスト表示のプログラムを見てみましょう。
<PRE>
// drawstring01.cs

using System;
using System.Drawing;
using System.Windows.Forms;

class drawstring01
{
    public static void Main()
    {
        Form f = new Form();
        f.Text = "猫でもわかるプログラミング";
        f.BackColor = SystemColors.Window;
        f.Paint += new PaintEventHandler(MyHandler);
       
        Application.Run(f);
    }

    static void MyHandler(object sender, PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        Font f = new Font("ＭＳ 明朝", 140);
        g.DrawString("猫", f, Brushes.Red, new PointF(10F, 10F)); 
    }
}
</PRE>
Mainクラスをメンバとして持つdrawstring01クラスは、Formクラスから継承されていない点に注意してください。<P>
Mainメソッドで、Formクラスのオブジェクトを生成しています。<P>
f.BackColorをSystemColors.Windowで指定している点に注意してください。<P>
SystemColorsクラスの静的プロパティでウィンドウの表示要素の色を取得できます。
Windowプロパティは、クライアント領域の背景色を表すColor構造体を取得します。<P>
次に、PaintイベントにPaintEventHandlerデリゲートでイベントハンドラを関連づけています。<P>
自作イベントハンドラMyHandlerでは、新規にフォントオブジェクトを生成しています。<P>実行結果は次のようになります。<P>
<IMG SRC="../img/form0501.gif" ALIGN="left">
<P>
<BR CLEAR="left"><BR>
<HR>
[<A HREF="../index_form.html">C# フォーム Index</A>]
[<A HREF="../index_cs.html">C# コンソール Index</A>]
[<A HREF="../index.html">総合Index</A>]
[<A HREF="form_04.htm">Previous Chapter</A>]
[<A HREF="form_06.htm">Next Chapter</A>]
<P>
<ADDRESS>
Update 20/Oct/2006 By Y.Kumei<BR>
<FONT COLOR="#FF0000">
当ホーム・ページの一部または全部を無断で複写、複製、
転載あるいはコンピュータ等のファイルに保存することを禁じます。
</FONT>
</ADDRESS>
</BODY>
</HTML>